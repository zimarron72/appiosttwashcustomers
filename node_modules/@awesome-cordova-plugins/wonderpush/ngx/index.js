import { __extends, __spreadArrays } from "tslib";
import { Injectable } from '@angular/core';
import { AwesomeCordovaNativePlugin, cordova, getPromise } from '@awesome-cordova-plugins/core';
var NestedObject = /** @class */ (function () {
    function NestedObject(pluginObj) {
        this.pluginObj = pluginObj;
    }
    NestedObject.prototype.wrap = function (functionName, args) {
        var plugin = WonderPush.getPlugin();
        var userPreferences = plugin ? plugin.UserPreferences : null;
        if (!plugin || !userPreferences || !userPreferences[functionName]) {
            return getPromise(function (res, rej) {
                rej(new Error('Could not find plugin'));
            });
        }
        return getPromise(function (res, rej) {
            userPreferences[functionName].apply(userPreferences, __spreadArrays(args, [res]));
        });
    };
    return NestedObject;
}());
export { NestedObject };
var UserPreferencesMethods = /** @class */ (function (_super) {
    __extends(UserPreferencesMethods, _super);
    function UserPreferencesMethods() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Get the default channel id
     *
     * @returns {Promise<string>}
     */
    UserPreferencesMethods.prototype.getDefaultChannelId = function () {
        return this.wrap('getDefaultChannelId', []);
    };
    /**
     * Set the default channel id
     *
     * @param {string} id
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.setDefaultChannelId = function (id) {
        return this.wrap('setDefaultChannelId', [id]);
    };
    /**
     * Get a channel group
     *
     * @param {string} groupId
     * @returns {Promise<WonderPushChannelGroup | null>}
     */
    UserPreferencesMethods.prototype.getChannelGroup = function (groupId) {
        return this.wrap('getChannelGroup', [groupId]);
    };
    /**
     * Get a channel
     *
     * @param {string} channelId
     * @returns {Promise<WonderPushChannel | null>}
     */
    UserPreferencesMethods.prototype.getChannel = function (channelId) {
        return this.wrap('getChannel', [channelId]);
    };
    /**
     * Create, update and remove channel existing groups to match the given channel groups
     *
     * @param {WonderPushChannelGroup[]} channelGroups
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.setChannelGroups = function (channelGroups) {
        return this.wrap('setChannelGroups', [channelGroups]);
    };
    /**
     * Create, update and remove channels to match the given channels
     *
     * @param {WonderPushChannel[]} channels
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.setChannels = function (channels) {
        return this.wrap('setChannels', [channels]);
    };
    /**
     * Create or update a channel group
     *
     * @param {WonderPushChannelGroup} channelGroup
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.putChannelGroup = function (channelGroup) {
        return this.wrap('putChannelGroup', [channelGroup]);
    };
    /**
     * Create or update a channel
     *
     * @param {WonderPushChannel} channel
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.putChannel = function (channel) {
        return this.wrap('putChannel', [channel]);
    };
    /**
     * Remove a channel group
     *
     * @param {string} groupId
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.removeChannelGroup = function (groupId) {
        return this.wrap('removeChannelGroup', [groupId]);
    };
    /**
     * Remove a channel
     *
     * @param {string} channelId
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.removeChannel = function (channelId) {
        return this.wrap('removeChannel', [channelId]);
    };
    return UserPreferencesMethods;
}(NestedObject));
export { UserPreferencesMethods };
var WonderPush = /** @class */ (function (_super) {
    __extends(WonderPush, _super);
    function WonderPush() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.UserPreferences = new UserPreferencesMethods(_this);
        return _this;
    }
    WonderPush.prototype.setUserId = function (userId) { return cordova(this, "setUserId", {}, arguments); };
    WonderPush.prototype.setLogging = function (enabled) { return cordova(this, "setLogging", {}, arguments); };
    WonderPush.prototype.setDelegate = function (delegate) { return cordova(this, "setDelegate", {}, arguments); };
    WonderPush.prototype.getDelegate = function () { return cordova(this, "getDelegate", {}, arguments); };
    WonderPush.prototype.getUserId = function () { return cordova(this, "getUserId", {}, arguments); };
    WonderPush.prototype.getInstallationId = function () { return cordova(this, "getInstallationId", {}, arguments); };
    WonderPush.prototype.getDeviceId = function () { return cordova(this, "getDeviceId", {}, arguments); };
    WonderPush.prototype.getPushToken = function () { return cordova(this, "getPushToken", {}, arguments); };
    WonderPush.prototype.getAccessToken = function () { return cordova(this, "getAccessToken", {}, arguments); };
    WonderPush.prototype.trackEvent = function (type, attributes) { return cordova(this, "trackEvent", {}, arguments); };
    WonderPush.prototype.addTag = function (tag) { return cordova(this, "addTag", {}, arguments); };
    WonderPush.prototype.removeTag = function (tag) { return cordova(this, "removeTag", {}, arguments); };
    WonderPush.prototype.removeAllTags = function () { return cordova(this, "removeAllTags", {}, arguments); };
    WonderPush.prototype.getTags = function () { return cordova(this, "getTags", {}, arguments); };
    WonderPush.prototype.hasTag = function (tag) { return cordova(this, "hasTag", {}, arguments); };
    WonderPush.prototype.setProperty = function (field, value) { return cordova(this, "setProperty", {}, arguments); };
    WonderPush.prototype.unsetProperty = function (field) { return cordova(this, "unsetProperty", {}, arguments); };
    WonderPush.prototype.addProperty = function (field, value) { return cordova(this, "addProperty", {}, arguments); };
    WonderPush.prototype.removeProperty = function (field, value) { return cordova(this, "removeProperty", {}, arguments); };
    WonderPush.prototype.getPropertyValue = function (field) { return cordova(this, "getPropertyValue", {}, arguments); };
    WonderPush.prototype.getPropertyValues = function (field) { return cordova(this, "getPropertyValues", {}, arguments); };
    WonderPush.prototype.getProperties = function () { return cordova(this, "getProperties", {}, arguments); };
    WonderPush.prototype.putProperties = function (properties) { return cordova(this, "putProperties", {}, arguments); };
    WonderPush.prototype.subscribeToNotifications = function () { return cordova(this, "subscribeToNotifications", {}, arguments); };
    WonderPush.prototype.isSubscribedToNotifications = function () { return cordova(this, "isSubscribedToNotifications", {}, arguments); };
    WonderPush.prototype.unsubscribeFromNotifications = function () { return cordova(this, "unsubscribeFromNotifications", {}, arguments); };
    WonderPush.prototype.getUserConsent = function () { return cordova(this, "getUserConsent", {}, arguments); };
    WonderPush.prototype.setUserConsent = function (consent) { return cordova(this, "setUserConsent", {}, arguments); };
    WonderPush.prototype.clearAllData = function () { return cordova(this, "clearAllData", {}, arguments); };
    WonderPush.prototype.clearEventsHistory = function () { return cordova(this, "clearEventsHistory", {}, arguments); };
    WonderPush.prototype.clearPreferences = function () { return cordova(this, "clearPreferences", {}, arguments); };
    WonderPush.prototype.downloadAllData = function () { return cordova(this, "downloadAllData", {}, arguments); };
    WonderPush.pluginName = "WonderPush";
    WonderPush.plugin = "wonderpush-cordova-sdk";
    WonderPush.pluginRef = "WonderPush";
    WonderPush.repo = "https://github.com/wonderpush/wonderpush-cordova-sdk";
    WonderPush.install = "ionic cordova plugin add wonderpush-cordova-sdk --variable CLIENT_ID=YOUR_CLIENT_ID --variable CLIENT_SECRET=YOUR_CLIENT_SECRET ";
    WonderPush.installVariables = ["CLIENT_ID", "CLIENT_SECRET"];
    WonderPush.platforms = ["Android", "iOS"];
    WonderPush.decorators = [
        { type: Injectable }
    ];
    return WonderPush;
}(AwesomeCordovaNativePlugin));
export { WonderPush };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvQGF3ZXNvbWUtY29yZG92YS1wbHVnaW5zL3BsdWdpbnMvd29uZGVycHVzaC9uZ3gvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyx1Q0FBK0MsVUFBVSxFQUFFLE1BQU0sK0JBQStCLENBQUM7O0lBZ0N0RyxzQkFBWSxTQUFjO1FBQ3hCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzdCLENBQUM7SUFFRCwyQkFBSSxHQUFKLFVBQVEsWUFBb0IsRUFBRSxJQUFXO1FBQ3ZDLElBQU0sTUFBTSxHQUFHLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUN0QyxJQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUMvRCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsZUFBZSxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQ2pFLE9BQU8sVUFBVSxDQUFJLFVBQUMsR0FBRyxFQUFFLEdBQUc7Z0JBQzVCLEdBQUcsQ0FBQyxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUM7WUFDMUMsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELE9BQU8sVUFBVSxDQUFJLFVBQUMsR0FBRyxFQUFFLEdBQUc7WUFDNUIsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxlQUFlLGlCQUFNLElBQUksR0FBRSxHQUFHLEdBQUUsQ0FBQztRQUN2RSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7dUJBaERIOzs7O0lBbUQ0QywwQ0FBWTs7OztJQUN0RDs7OztPQUlHO0lBQ0gsb0RBQW1CLEdBQW5CO1FBQ0UsT0FBTyxJQUFJLENBQUMsSUFBSSxD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Ozs7Ozs7O2dCQXRZaEIsVUFBVTs7cUJBbE9YO0VBbU9nQywwQkFBMEI7U0FBN0MsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFBsdWdpbiwgQ29yZG92YSwgQXdlc29tZUNvcmRvdmFOYXRpdmVQbHVnaW4sIGdldFByb21pc2UgfSBmcm9tICdAYXdlc29tZS1jb3Jkb3ZhLXBsdWdpbnMvY29yZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV29uZGVyUHVzaERlbGVnYXRlIHtcbiAgdXJsRm9yRGVlcExpbmsodXJsOiBzdHJpbmcsIGNhbGxiYWNrOiAodXJsPzogc3RyaW5nKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb25kZXJQdXNoQ2hhbm5lbCB7XG4gIGlkOiBzdHJpbmc7XG4gIGdyb3VwSWQ/OiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBieXBhc3NEbmQ/OiBib29sZWFuO1xuICBzaG93QmFkZ2U/OiBib29sZWFuO1xuICBpbXBvcnRhbmNlPzogbnVtYmVyO1xuICBsaWdodHM/OiBib29sZWFuO1xuICBsaWdodENvbG9yPzogbnVtYmVyO1xuICB2aWJyYXRlPzogYm9vbGVhbjtcbiAgc291bmQ/OiBib29sZWFuO1xuICBzb3VuZFVyaT86IHN0cmluZztcbiAgbG9ja3NjcmVlblZpc2liaWxpdHk/OiBudW1iZXI7XG4gIHZpYnJhdGVJblNpbGVudE1vZGU/OiBib29sZWFuO1xuICBjb2xvcj86IG51bWJlcjtcbiAgbG9jYWxPbmx5PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb25kZXJQdXNoQ2hhbm5lbEdyb3VwIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZT86IHN0cmluZztcbn1cblxuY2xhc3MgTmVzdGVkT2JqZWN0IHtcbiAgcGx1Z2luT2JqOiBhbnk7XG4gIGNvbnN0cnVjdG9yKHBsdWdpbk9iajogYW55KSB7XG4gICAgdGhpcy5wbHVnaW5PYmogPSBwbHVnaW5PYmo7XG4gIH1cblxuICB3cmFwPFQ+KGZ1bmN0aW9uTmFtZTogc3RyaW5nLCBhcmdzOiBhbnlbXSk6IFByb21pc2U8VD4ge1xuICAgIGNvbnN0IHBsdWdpbiA9IFdvbmRlclB1c2guZ2V0UGx1Z2luKCk7XG4gICAgY29uc3QgdXNlclByZWZlcmVuY2VzID0gcGx1Z2luID8gcGx1Z2luLlVzZXJQcmVmZXJlbmNlcyA6IG51bGw7XG4gICAgaWYgKCFwbHVnaW4gfHwgIXVzZXJQcmVmZXJlbmNlcyB8fCAhdXNlclByZWZlcmVuY2VzW2Z1bmN0aW9uTmFtZV0pIHtcbiAgICAgIHJldHVybiBnZXRQcm9taXNlPFQ+KChyZXMsIHJlaikgPT4ge1xuICAgICAgICByZWoobmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCBwbHVnaW4nKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFByb21pc2U8VD4oKHJlcywgcmVqKSA9PiB7XG4gICAgICB1c2VyUHJlZmVyZW5jZXNbZnVuY3Rpb25OYW1lXS5hcHBseSh1c2VyUHJlZmVyZW5jZXMsIFsuLi5hcmdzLCByZXNdKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVXNlclByZWZlcmVuY2VzTWV0aG9kcyBleHRlbmRzIE5lc3RlZE9iamVjdCB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgY2hhbm5lbCBpZFxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgZ2V0RGVmYXVsdENoYW5uZWxJZCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLndyYXA8c3RyaW5nIHwgbnVsbD4oJ2dldERlZmF1bHRDaGFubmVsSWQnLCBbXSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IGNoYW5uZWwgaWRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBzZXREZWZhdWx0Q2hhbm5lbElkKGlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLndyYXAoJ3NldERlZmF1bHRDaGFubmVsSWQnLCBbaWRdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBjaGFubmVsIGdyb3VwXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFdvbmRlclB1c2hDaGFubmVsR3JvdXAgfCBudWxsPn1cbiAgICovXG4gIGdldENoYW5uZWxHcm91cChncm91cElkOiBzdHJpbmcpOiBQcm9taXNlPFdvbmRlclB1c2hDaGFubmVsR3JvdXAgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMud3JhcDxXb25kZXJQdXNoQ2hhbm5lbEdyb3VwIHwgbnVsbD4oJ2dldENoYW5uZWxHcm91cCcsIFtncm91cElkXSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY2hhbm5lbFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhbm5lbElkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFdvbmRlclB1c2hDaGFubmVsIHwgbnVsbD59XG4gICAqL1xuICBnZXRDaGFubmVsKGNoYW5uZWxJZDogc3RyaW5nKTogUHJvbWlzZTxXb25kZXJQdXNoQ2hhbm5lbCB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy53cmFwPFdvbmRlclB1c2hDaGFubmVsIHwgbnVsbD4oJ2dldENoYW5uZWwnLCBbY2hhbm5lbElkXSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlLCB1cGRhdGUgYW5kIHJlbW92ZSBjaGFubmVsIGV4aXN0aW5nIGdyb3VwcyB0byBtYXRjaCB0aGUgZ2l2ZW4gY2hhbm5lbCBncm91cHNcbiAgICpcbiAgICogQHBhcmFtIHtXb25kZXJQdXNoQ2hhbm5lbEdyb3VwW119IGNoYW5uZWxHcm91cHNcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIHNldENoYW5uZWxHcm91cHMoY2hhbm5lbEdyb3VwczogV29uZGVyUHVzaENoYW5uZWxHcm91cFtdKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy53cmFwKCdzZXRDaGFubmVsR3JvdXBzJywgW2NoYW5uZWxHcm91cHNdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUsIHVwZGF0ZSBhbmQgcmVtb3ZlIGNoYW5uZWxzIHRvIG1hdGNoIHRoZSBnaXZlbiBjaGFubmVsc1xuICAgKlxuICAgKiBAcGFyYW0ge1dvbmRlclB1c2hDaGFubmVsW119IGNoYW5uZWxzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBzZXRDaGFubmVscyhjaGFubmVsczogV29uZGVyUHVzaENoYW5uZWxbXSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMud3JhcCgnc2V0Q2hhbm5lbHMnLCBbY2hhbm5lbHNdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgb3IgdXBkYXRlIGEgY2hhbm5lbCBncm91cFxuICAgKlxuICAgKiBAcGFyYW0ge1dvbmRlclB1c2hDaGFubmVsR3JvdXB9IGNoYW5uZWxHcm91cFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgcHV0Q2hhbm5lbEdyb3VwKGNoYW5uZWxHcm91cDogV29uZGVyUHVzaENoYW5uZWxHcm91cCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMud3JhcCgncHV0Q2hhbm5lbEdyb3VwJywgW2NoYW5uZWxHcm91cF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBvciB1cGRhdGUgYSBjaGFubmVsXG4gICAqXG4gICAqIEBwYXJhbSB7V29uZGVyUHVzaENoYW5uZWx9IGNoYW5uZWxcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIHB1dENoYW5uZWwoY2hhbm5lbDogV29uZGVyUHVzaENoYW5uZWwpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLndyYXAoJ3B1dENoYW5uZWwnLCBbY2hhbm5lbF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNoYW5uZWwgZ3JvdXBcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwSWRcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIHJlbW92ZUNoYW5uZWxHcm91cChncm91cElkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLndyYXAoJ3JlbW92ZUNoYW5uZWxHcm91cCcsIFtncm91cElkXSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgY2hhbm5lbFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhbm5lbElkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICByZW1vdmVDaGFubmVsKGNoYW5uZWxJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy53cmFwKCdyZW1vdmVDaGFubmVsJywgW2NoYW5uZWxJZF0pO1xuICB9XG59XG5cbi8qKlxuICogQG5hbWUgUHVzaCBOb3RpZmljYXRpb25zIC0gV29uZGVyUHVzaFxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2VuZCB1bmxpbWl0ZWQgcHVzaCBub3RpZmljYXRpb25zIHRvIGlPUyBhbmQgQW5kcm9pZCBkZXZpY2VzLlxuICpcbiAqIEdldCBzdGFydGVkIGluIG1pbnV0ZXM6IFtJb25pYyBRdWlja3N0YXJ0IEd1aWRlXShodHRwczovL2RvY3Mud29uZGVycHVzaC5jb20vZG9jcy9pb25pYy1xdWlja3N0YXJ0KS5cbiAqXG4gKiBBZHZhbmNlZCBzZWdtZW50YXRpb24sIGF1dG9tYXRpb24gYW5kIHBlcnNvbmFsaXphdGlvbiBvZiBwdXNoIG1lc3NhZ2VzIGZvciDigqwxIHBlciAxMDAwIHN1YnNjcmliZXJzLlxuICpcbiAqIFJlcXVpcmVzIHRoZSBDb3Jkb3ZhIHBsdWdpbiBgd29uZGVycHVzaC1jb3Jkb3ZhLXNka2AuXG4gKlxuICogW1dvbmRlclB1c2ggcHVzaCBub3RpZmljYXRpb25zXShodHRwczovL3d3dy53b25kZXJwdXNoLmNvbSkgYXJlIHRoZSBtb3N0IGVmZmVjdGl2ZSB3YXlcbiAqIHRvIHJldGFpbiB5b3VyIHVzZXJzIGFuZCBncm93IHlvdXIgYXVkaWVuY2Ugd2hpbGUgcmVtYWluaW5nIGZ1bGx5IEdEUFIgY29tcGxpYW50LlxuICogQHVzYWdlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBXb25kZXJQdXNoIH0gZnJvbSAnQGF3ZXNvbWUtY29yZG92YS1wbHVnaW5zL3dvbmRlcnB1c2gnO1xuICpcbiAqXG4gKiBjb25zdHJ1Y3Rvcihwcml2YXRlIHdvbmRlclB1c2g6IFdvbmRlclB1c2gpIHsgfVxuICpcbiAqIC4uLlxuICpcbiAqIC8vIFN1YnNjcmliZSB1c2VyXG4gKiB0aGlzLndvbmRlclB1c2guc3Vic2NyaWJlVG9Ob3RpZmljYXRpb25zKClcbiAqICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coXCJVc2VyIHN1YnNjcmliZWQgdG8gbm90aWZpY2F0aW9uc1wiKSlcbiAqICAgLmNhdGNoKChlcnJvcjogYW55KSA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7XG4gKlxuICpcbiAqIC8vIFNlbmQgYW4gZXZlbnQgKGEgcHVyY2hhc2UgaW4gdGhpcyBleGFtcGxlKVxuICogdGhpcy53b25kZXJQdXNoLnNlbmRFdmVudCgncHVyY2hhc2UnLCB7XG4gKiAgIGZsb2F0X3ByaWNlOiAxMi45OSxcbiAqICAgc3RyaW5nX3NrdTogXCJYMTIzNDU2XCJcbiAqIH0pO1xuICpcbiAqIC8vIFRhZyB1c2VycyAoYXMgY3VzdG9tZXJzKVxuICogdGhpcy53b25kZXJQdXNoLmFkZFRhZygnY3VzdG9tZXInKTtcbiAqXG4gKiAvLyBQZXJzb25hbGl6ZVxuICogLy8gMS4gU3RvcmUgdXNlciBkZXRhaWxzLlxuICogLy8gMi4gVXNlIHRob3NlIGRldGFpbHMgdG8gY3JlYXRlIHNlZ21lbnRzLlxuICogLy8gMy4gSW5jbHVkZSB0aG9zZSBkZXRhaWxzIGluIHlvdXIgbm90aWZpY2F0aW9ucy5cbiAqIHRoaXMud29uZGVyUHVzaC5wdXRQcm9wZXJ0aWVzKHtcbiAqICAgc3RyaW5nX25hbWU6ICdKb2huIEQuJyxcbiAqICAgaW50X2FnZTogMjRcbiAqIH0pO1xuICpcbiAqIC8vIEdEUFJcbiAqIC8vIDEuIHNldCBSRVFVSVJFU19VU0VSX0NPTlNFTlQ9dHJ1ZSB0byBlbmFibGUgR0RQUiBjb21wbGlhbmNlLlxuICogLy8gMi4gV29uZGVyUHVzaCBkb2Vzbid0IHN0YXJ0IHVudGlsIHNldFVzZXJDb25zZW50KHRydWUpIGlzIGNhbGxlZC5cbiAqIGNvbnN0IG9uQ2xpY2sgPSAodXNlckNvbnNlbnQ6IGJvb2xlYW4pID0+IHRoaXMud29uZGVyUHVzaC5zZXRVc2VyQ29uc2VudCh1c2VyQ29uc2VudCk7XG4gKlxuICogLy8gTGlzdGVuIHRvIG5vdGlmaWNhdGlvbiBjbGlja3NcbiAqIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dvbmRlcnB1c2gubm90aWZpY2F0aW9uT3BlbicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb24gb3BlbmVkJywgZXZlbnQubm90aWZpY2F0aW9uKTtcbiAqICAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvblR5cGUgPT09ICdkYXRhJykge1xuICogICAgIGNvbnNvbGUubG9nKCdTaWxlbnQgbm90aWZpY2F0aW9uJywgZXZlbnQubm90aWZpY2F0aW9uKTtcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqIEBpbnRlcmZhY2VzXG4gKiBXb25kZXJQdXNoQ2hhbm5lbFxuICogV29uZGVyUHVzaENoYW5uZWxHcm91cFxuICovXG5AUGx1Z2luKHtcbiAgcGx1Z2luTmFtZTogJ1dvbmRlclB1c2gnLFxuICBwbHVnaW46ICd3b25kZXJwdXNoLWNvcmRvdmEtc2RrJyxcbiAgcGx1Z2luUmVmOiAnV29uZGVyUHVzaCcsXG4gIHJlcG86ICdodHRwczovL2dpdGh1Yi5jb20vd29uZGVycHVzaC93b25kZXJwdXNoLWNvcmRvdmEtc2RrJyxcbiAgaW5zdGFsbDpcbiAgICAnaW9uaWMgY29yZG92YSBwbHVnaW4gYWRkIHdvbmRlcnB1c2gtY29yZG92YS1zZGsgLS12YXJpYWJsZSBDTElFTlRfSUQ9WU9VUl9DTElFTlRfSUQgLS12YXJpYWJsZSBDTElFTlRfU0VDUkVUPVlPVVJfQ0xJRU5UX1NFQ1JFVCAnLFxuICBpbnN0YWxsVmFyaWFibGVzOiBbJ0NMSUVOVF9JRCcsICdDTElFTlRfU0VDUkVUJ10sXG4gIHBsYXRmb3JtczogWydBbmRyb2lkJywgJ2lPUyddLFxufSlcbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBXb25kZXJQdXNoIGV4dGVuZHMgQXdlc29tZUNvcmRvdmFOYXRpdmVQbHVnaW4ge1xuICAvKipcbiAgICogU2V0cyB0aGUgdXNlciBpZCwgdXNlZCB0byBpZGVudGlmeSBhIHNpbmdsZSBpZGVudGl0eSBhY3Jvc3MgbXVsdGlwbGUgZGV2aWNlcyxcbiAgICogYW5kIHRvIGNvcnJlY3RseSBpZGVudGlmeSBtdWx0aXBsZSB1c2VycyBvbiBhIHNpbmdsZSBkZXZpY2UuXG4gICAqXG4gICAqIElmIG5vdCBjYWxsZWQsIHRoZSBsYXN0IHVzZWQgdXNlciBpZCBpdCBhc3N1bWVkLiBEZWZhdWx0aW5nIHRvIGBudWxsYCBpZiBub25lIGlzIGtub3duLlxuICAgKlxuICAgKiBVcG9uIGNoYW5naW5nIHVzZXJJZCwgdGhlIGFjY2VzcyB0b2tlbiBpcyB3aXBlZCwgc28gYXZvaWQgdW5uZWNlc3NhcnkgY2FsbHMsIGxpa2UgY2FsbGluZyB3aXRoIGBudWxsYFxuICAgKiBqdXN0IGJlZm9yZSBjYWxsaW5nIHdpdGggYSB1c2VyIGlkLlxuICAgKlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IHVzZXJJZCAtIFRoZSB1c2VyIGlkLCB1bmlxdWUgdG8geW91ciBhcHBsaWNhdGlvbi5cbiAgICogICBVc2UgYG51bGxgIGZvciBhbm9ueW1vdXMgdXNlcnMuXG4gICAqXG4gICAqICAgWW91IGFyZSBzdHJvbmdseSBlbmNvdXJhZ2VkIHRvIHVzZSB5b3VyIG93biB1bmlxdWUgaW50ZXJuYWwgaWRlbnRpZmllci5cbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG5cbiAgQENvcmRvdmEoKVxuICBzZXRVc2VySWQodXNlcklkOiBzdHJpbmcgfCBudWxsKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogQ29udHJvbHMgbmF0aXZlIFNESyBsb2dnaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgLSBXaGV0aGVyIHRvIGVuYWJsZSBsb2dzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBzZXRMb2dnaW5nKGVuYWJsZWQ6IGJvb2xlYW4pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIGEgZGVsZWdhdGUgZm9yIHRpZ2h0ZXIgaW50ZWdyYXRpb24sIG9yIHJlbW92ZXMgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7P1dvbmRlclB1c2hEZWxlZ2F0ZX0gZGVsZWdhdGUgLSBUaGUgZGVsZWdhdGUgdG8gc2V0LCBvciBgbnVsbGAgdG8gcmVtb3ZlIGl0LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBzZXREZWxlZ2F0ZShkZWxlZ2F0ZTogV29uZGVyUHVzaERlbGVnYXRlIHwgbnVsbCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgZGVsZWdhdGUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFdvbmRlclB1c2hEZWxlZ2F0ZSB8IG51bGw+fSBBIHByb21pc2Ugd2l0aCB0aGUgZGVsZWdhdGUgb2YgbnVsbFxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXREZWxlZ2F0ZSgpOiBQcm9taXNlPFdvbmRlclB1c2hEZWxlZ2F0ZSB8IG51bGw+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdXNlcklkIGN1cnJlbnRseSBpbiB1c2UsIGBudWxsYCBieSBkZWZhdWx0LlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmcgfCBudWxsPn0gQSBwcm9taXNlIHdpdGggdGhlIHVzZXIgSUQgb3IgbnVsbFxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXRVc2VySWQoKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluc3RhbGxhdGlvbklkIGlkZW50aWZ5aW5nIHlvdXIgYXBwbGljYXRpb24gb24gYSBkZXZpY2UsIGJvbmQgdG8gYSBzcGVjaWZpYyB1c2VySWQuXG4gICAqIElmIHlvdSB3YW50IHRvIHN0b3JlIHRoaXMgaW5mb3JtYXRpb24gb24geW91ciBzZXJ2ZXJzLCBrZWVwIHRoZSBjb3JyZXNwb25kaW5nIHVzZXJJZCB3aXRoIGl0LlxuICAgKiBXaWxsIHJldHVybiBgbnVsbGAgdW50aWwgdGhlIFNESyBpcyBwcm9wZXJseSBpbml0aWFsaXplZC5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nIHwgbnVsbD59IEEgcHJvbWlzZSB3aXRoIHRoZSBpbnN0YWxsYXRpb24gSUQgb3IgbnVsbFxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXRJbnN0YWxsYXRpb25JZCgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdW5pcXVlIGRldmljZSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZyB8IG51bGw+fSBBIHByb21pc2Ugd2l0aCB0aGUgZGV2aWNlIElEIG9yIG51bGxcbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgZ2V0RGV2aWNlSWQoKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHB1c2ggdG9rZW4uXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZyB8IG51bGw+fSBBIHByb21pc2Ugd2l0aCB0aGUgcHVzaCB0b2tlbiBvciBgbnVsbGBcbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgZ2V0UHVzaFRva2VuKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgdXNlZCBhY2Nlc3MgdG9rZW4uXG4gICAqIFJldHVybnMgYG51bGxgIHVudGlsIHRoZSBTREsgaXMgcHJvcGVybHkgaW5pdGlhbGl6ZWQuXG4gICAqIFRoaXMgdG9nZXRoZXIgd2l0aCB5b3VyIGNsaWVudCBzZWNyZXQgZ2l2ZXMgZW50aXJlIGNvbnRyb2wgdG8gdGhlIGN1cnJlbnQgaW5zdGFsbGF0aW9uIGFuZCBhc3NvY2lhdGVkIHVzZXIsIHlvdSBzaG91bGQgbm90IGRpc2Nsb3NlIGl0IHVubmVjZXNzYXJpbHkuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZyB8IG51bGw+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXRBY2Nlc3NUb2tlbigpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhbiBldmVudCB0byBiZSB0cmFja2VkIHRvIFdvbmRlclB1c2guXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIGV2ZW50IHR5cGUsIG9yIG5hbWUuIEV2ZW50IHR5cGVzIHN0YXJ0aW5nIHdpdGggYW4gYEBgIGNoYXJhY3RlciBhcmUgcmVzZXJ2ZWQuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gW2F0dHJpYnV0ZXNdIC0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgY3VzdG9tIHByb3BlcnRpZXMgdG8gYmUgYXR0YWNoZWQgdG8gdGhlIGV2ZW50LlxuICAgKiAgIFRoZSBrZXlzIHNob3VsZCBiZSBwcmVmaXhlZCBhY2NvcmRpbmcgdG8gdGhlIHR5cGUgb2YgdGhlaXIgdmFsdWVzLlxuICAgKiAgIFlvdSBjYW4gZmluZCB0aGUgZGV0YWlscyBpbiB0aGUgW0NvbmNlcHRzID4gQ3VzdG9tIGZpZWxkc10oaHR0cHM6Ly93d3cud29uZGVycHVzaC5jb20vZG9jcy9ndWlkZS9jdXN0b20tZmllbGRzKSBzZWN0aW9uIG9mIHRoZSBkb2N1bWVudGF0aW9uLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICB0cmFja0V2ZW50KHR5cGU6IHN0cmluZywgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgb25lIG9yIG1vcmUgdGFncyB0byB0aGUgaW5zdGFsbGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdGFnIC0gVGhlIHRhZ3MgdG8gYWRkIHRvIHRoZSBpbnN0YWxsYXRpb24uIFlvdSBjYW4gdXNlIGVpdGhlciBhIHNpbmdsZSBzdHJpbmcgYXJndW1lbnQgb3IgYW4gYXJyYXkgb2Ygc3RyaW5ncy5cbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgYWRkVGFnKHRhZzogc3RyaW5nIHwgc3RyaW5nW10pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIG9uZSBvciBtb3JlIHRhZ3MgZnJvbSB0aGUgaW5zdGFsbGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdGFnIC0gVGhlIHRhZ3MgdG8gcmVtb3ZlIGZyb20gdGhlIGluc3RhbGxhdGlvbi4gWW91IGNhbiB1c2UgZWl0aGVyIGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCBvciBhbiBhcnJheSBvZiBzdHJpbmdzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICByZW1vdmVUYWcodGFnOiBzdHJpbmcgfCBzdHJpbmdbXSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHRhZ3MgZnJvbSB0aGUgaW5zdGFsbGF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICByZW1vdmVBbGxUYWdzKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIHRoZSB0YWdzIG9mIHRoZSBpbnN0YWxsYXRpb24uXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZ1tdPn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgZ2V0VGFncygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3RzIHdoZXRoZXIgdGhlIGluc3RhbGxhdGlvbiBoYXMgdGhlIGdpdmVuIHRhZyBhdHRhY2hlZCB0byBpdC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyAtIFRoZSB0YWcgdG8gdGVzdC5cbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGhhc1RhZyh0YWc6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSB0byBhIGdpdmVuIGluc3RhbGxhdGlvbiBwcm9wZXJ0eS5cbiAgICpcbiAgICogVGhlIHByZXZpb3VzIHZhbHVlIGlzIHJlcGxhY2VkIGVudGlyZWx5LlxuICAgKiBTZXR0aW5nIGB1bmRlZmluZWRgIG9yIGBudWxsYCBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzIHtAbGluayBjb3Jkb3ZhLnBsdWdpbnMuV29uZGVyUHVzaCN1bnNldFByb3BlcnR5fS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHNldFxuICAgKiBAcGFyYW0gdmFsdWVcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc2V0UHJvcGVydHkoZmllbGQ6IHN0cmluZywgdmFsdWU6IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHZhbHVlIG9mIGEgZ2l2ZW4gaW5zdGFsbGF0aW9uIHByb3BlcnR5LlxuICAgKlxuICAgKiBUaGUgcHJldmlvdXMgdmFsdWUgaXMgcmVwbGFjZWQgd2l0aCBgbnVsbGAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICB1bnNldFByb3BlcnR5KGZpZWxkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSB2YWx1ZSB0byBhIGdpdmVuIGluc3RhbGxhdGlvbiBwcm9wZXJ0eS5cbiAgICpcbiAgICogVGhlIHN0b3JlZCB2YWx1ZSBpcyBtYWRlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IG9uZS5cbiAgICogSWYgdGhlIGdpdmVuIHZhbHVlIGlzIGFuIGFycmF5LCBhbGwgaXRzIHZhbHVlcyBhcmUgYWRkZWQuXG4gICAqIElmIGEgdmFsdWUgaXMgYWxyZWFkeSBwcmVzZW50IGluIHRoZSBzdG9yZWQgdmFsdWUsIGl0IHdvbid0IGJlIGFkZGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICogQHBhcmFtIHZhbHVlXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBhZGRQcm9wZXJ0eShmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHZhbHVlIGZyb20gYSBnaXZlbiBpbnN0YWxsYXRpb24gcHJvcGVydHkuXG4gICAqXG4gICAqIFRoZSBzdG9yZWQgdmFsdWUgaXMgbWFkZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBvbmUuXG4gICAqIElmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhbiBhcnJheSwgYWxsIGl0cyB2YWx1ZXMgYXJlIHJlbW92ZWQuXG4gICAqIElmIGEgdmFsdWUgaXMgcHJlc2VudCBtdWx0aXBsZSB0aW1lcyBpbiB0aGUgc3RvcmVkIHZhbHVlLCB0aGV5IHdpbGwgYWxsIGJlIHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gdmFsdWVcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgcmVtb3ZlUHJvcGVydHkoZmllbGQ6IHN0cmluZywgdmFsdWU6IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIGEgZ2l2ZW4gaW5zdGFsbGF0aW9uIHByb3BlcnR5LlxuICAgKlxuICAgKiBJZiB0aGUgcHJvcGVydHkgc3RvcmVzIGFuIGFycmF5LCBvbmx5IHRoZSBmaXJzdCB2YWx1ZSBpcyByZXR1cm5lZC5cbiAgICogVGhpcyB3YXkgeW91IGRvbid0IGhhdmUgdG8gZGVhbCB3aXRoIHBvdGVudGlhbCBhcnJheXMgaWYgdGhhdCBwcm9wZXJ0eSBpcyBub3Qgc3VwcG9zZWQgdG8gaG9sZCBvbmUuXG4gICAqIFJldHVybnMgYG51bGxgIGlmIHRoZSBwcm9wZXJ0eSBpcyBhYnNlbnQgb3IgaGFzIGFuIGVtcHR5IGFycmF5IHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmVhZCB2YWx1ZXMgZnJvbVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXRQcm9wZXJ0eVZhbHVlKGZpZWxkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSB2YWx1ZXMgb2YgYSBnaXZlbiBpbnN0YWxsYXRpb24gcHJvcGVydHkuXG4gICAqXG4gICAqIElmIHRoZSBwcm9wZXJ0eSBkb2VzIG5vdCBzdG9yZSBhbiBhcnJheSwgYW4gYXJyYXkgaXMgcmV0dXJuZWQgbmV2ZXJ0aGVsZXNzLlxuICAgKiBUaGlzIHdheSB5b3UgZG9uJ3QgaGF2ZSB0byBkZWFsIHdpdGggcG90ZW50aWFsIHNjYWxhciB2YWx1ZXMgaWYgdGhhdCBwcm9wZXJ0eSBpcyBzdXBwb3NlZCB0byBob2xkIGFuIGFycmF5LlxuICAgKiBSZXR1cm5zIGFuIGVtcHR5IGFycmF5IGluc3RlYWQgb2YgYG51bGxgIGlmIHRoZSBwcm9wZXJ0eSBpcyBhYnNlbnQuXG4gICAqIFJldHVybnMgYW4gYXJyYXkgd3JhcHBpbmcgYW55IHNjYWxhciB2YWx1ZSBoZWxkIGJ5IHRoZSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHJlYWQgdmFsdWVzIGZyb21cbiAgICogQHJldHVybnMge1Byb21pc2U8YW55W10+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXRQcm9wZXJ0eVZhbHVlcyhmaWVsZDogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsYXRlc3Qga25vd24gY3VzdG9tIHByb3BlcnRpZXMgYXR0YWNoZWQgdG8gdGhlIGN1cnJlbnQgaW5zdGFsbGF0aW9uIG9iamVjdCBzdG9yZWQgYnkgV29uZGVyUHVzaC5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8e1twOiBzdHJpbmddOiBhbnl9Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgZ2V0UHJvcGVydGllcygpOiBQcm9taXNlPHsgW2tleTogc3RyaW5nXTogYW55IH0+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgcHJvcGVydGllcyBhdHRhY2hlZCB0byB0aGUgY3VycmVudCBpbnN0YWxsYXRpb24gb2JqZWN0IHN0b3JlZCBieSBXb25kZXJQdXNoLlxuICAgKlxuICAgKiBJbiBvcmRlciB0byByZW1vdmUgYSB2YWx1ZSwgdXNlIGBudWxsYC5cbiAgICpcbiAgICogQHBhcmFtIHt7W3A6IHN0cmluZ106IGFueX19IHByb3BlcnRpZXMuIFRoZSBrZXlzIHNob3VsZCBiZSBwcmVmaXhlZCBhY2NvcmRpbmcgdG8gdGhlIHR5cGUgb2YgdGhlaXIgdmFsdWVzLiBZb3UgY2FuIGZpbmQgdGhlIGRldGFpbHMgaW4gdGhlIFtTZWdtZW50YXRpb24gPiBQcm9wZXJ0aWVzXShodHRwczovL2RvY3Mud29uZGVycHVzaC5jb20vZG9jcy9wcm9wZXJ0aWVzI3NlY3Rpb24tY3VzdG9tLXByb3BlcnRpZXMpIHNlY3Rpb24gb2YgdGhlIGRvY3VtZW50YXRpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHB1dFByb3BlcnRpZXMocHJvcGVydGllczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZXMgdG8gcHVzaCBub3RpZmljYXRpb24gYW5kIHJlZ2lzdGVycyB0aGUgZGV2aWNlIHRva2VuIHdpdGggV29uZGVQdXNoLlxuICAgKlxuICAgKiBPbiBpT1MsIHlvdSAqKm11c3QqKiBjYWxsIHRoZSBmb2xsb3dpbmcgbWV0aG9kIGF0IGxlYXN0IG9uY2UgdG8gbWFrZSB0aGUgbm90aWZpY2F0aW9uIHZpc2libGUgdG8gdGhlIHVzZXIuXG4gICAqXG4gICAqIC0gWW91IGNhbiBjYWxsIHRoaXMgbWV0aG9kIG11bHRpcGxlIHRpbWVzLiBUaGUgdXNlciBpcyBvbmx5IHByb21wdGVkIGZvciBwZXJtaXNzaW9uIGJ5IGlPUyBvbmNlLlxuICAgKiAtIFRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZCBpZiB0aGUgcGVybWlzc2lvbiBoYXMgYWxyZWFkeSBiZWVuIGdyYW50ZWQsIGJ1dCBpdCBkb2VzIG5vdCBoYXJtIGVpdGhlci5cbiAgICogLSBJZiB0aGUgcGVybWlzc2lvbiBoYXMgYmVlbiBkZW5pZWQgaW4gdGhlIE9TLCB0aGUgdXNlciB3aWxsIHN0YXkgc29mdCBvcHQtb3V0LlxuICAgKlxuICAgKiBCZWNhdXNlIGluIGlPUyB5b3Ugb25seSBoYXZlICpvbmUqIGNoYW5jZSBmb3IgcHJvbXB0aW5nIHRoZSB1c2VyLCB5b3Ugc2hvdWxkIGZpbmQgYSBnb29kIHRpbWluZyBmb3IgdGhhdC5cbiAgICogRm9yIGEgc3RhcnQsIHlvdSBjYW4gc3lzdGVtYXRpY2FsbHkgY2FsbCBpdCB3aGVuIHRoZSBhcHBsaWNhdGlvbiBzdGFydHMsIHNvIHRoYXQgdGhlIHVzZXIgd2lsbCBiZSBwcm9tcHRlZCBkaXJlY3RseSBhdCB0aGUgZmlyc3QgbGF1bmNoLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fSBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHVwb24gc3VjY2Vzc2Z1bCBzdWJzY3JpcHRpb25cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc3Vic2NyaWJlVG9Ob3RpZmljYXRpb25zKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgbm90aWZpY2F0aW9ucyBhcmUgZW5hYmxlZC5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGlzU3Vic2NyaWJlZFRvTm90aWZpY2F0aW9ucygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogVW5zdWJzY3JpYmVzIGZyb20gcHVzaCBub3RpZmljYXRpb24uXG4gICAqIFRoaXMgbWV0aG9kIG1hcmtzIHRoZSB1c2VyIGFzIHNvZnQgb3B0LW91dC5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgdW5zdWJzY3JpYmVGcm9tTm90aWZpY2F0aW9ucygpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB1c2VyIGNvbnNlbnQgc3RhdGUuXG4gICAqIFJldHVybnMgdW5kZWZpbmVkIGlmIG5vIGV4cGxpY2l0IGNvbnNlbnQgd2FzIHNldC5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGdldFVzZXJDb25zZW50KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBvciB3aXRoZHJhd3MgdXNlciBjb25zZW50LlxuICAgKiBJZiB0aGUgYHJlcXVpcmVzVXNlckNvbnNlbnRgIGluaXRpYWxpemF0aW9uIG9wdGlvbiBpcyB0cnVlLFxuICAgKiB0aGUgd2hvbGUgU0RLIGlzIHBhdXNlZCBhbmQgbm8gZGF0YSBpcyBzZW50IHRvIFdvbmRlclB1c2gsIHVudGlsIGNvbnNlbnQgaXMgcHJvdmlkZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29uc2VudCAtXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHNldFVzZXJDb25zZW50KGNvbnNlbnQ6IGJvb2xlYW4pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW55IGxvY2FsIHN0b3JhZ2UgYW5kIGFzayB0aGUgV29uZGVyUHVzaCBzZXJ2ZXJzIHRvIGRlbGV0ZSBhbnkgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIGFsbCBsb2NhbCBpbnN0YWxsYXRpb25zIGFuZCByZWxhdGVkIHVzZXJzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBjbGVhckFsbERhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogQXNrIHRoZSBXb25kZXJQdXNoIHNlcnZlcnMgdG8gZGVsZXRlIGFueSBldmVudCBhc3NvY2lhdGVkIHdpdGggdGhlIGFsbCBsb2NhbCBpbnN0YWxsYXRpb25zLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBjbGVhckV2ZW50c0hpc3RvcnkoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogQXNrIHRoZSBXb25kZXJQdXNoIHNlcnZlcnMgdG8gZGVsZXRlIGFueSBjdXN0b20gZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIGFsbCBsb2NhbCBpbnN0YWxsYXRpb25zIGFuZCByZWxhdGVkIHVzZXJzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBjbGVhclByZWZlcmVuY2VzKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyB0aGUgZG93bmxvYWQgb2YgYWxsIHVzZXIgcmVtb3RlIGFuZCBsb2NhbCBkYXRhLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBkb3dubG9hZEFsbERhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICBVc2VyUHJlZmVyZW5jZXMgPSBuZXcgVXNlclByZWZlcmVuY2VzTWV0aG9kcyh0aGlzKTtcbn1cbiJdfQ==